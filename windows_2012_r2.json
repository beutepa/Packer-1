{
    "builders":[
        {
            "name":"vmware-basewindows",
            "type":"vmware-iso",
            "iso_url":"./iso/en_windows_server_2012_r2_with_update_x64_dvd_6052708.iso",
            "iso_checksum_type":"md5",
            "iso_checksum":"78bff6565f178ed08ab534397fe44845",
            "headless":false,
            "boot_wait":"2m",
            "shutdown_command":"shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "guest_os_type":"windows8srv-64",
            "disk_size":61440,
            "vnc_port_min":5900,
            "vnc_port_max":5980,
            "communicator":"winrm",
            "winrm_username":"vagrant",
            "winrm_password":"vagrant",
            "winrm_port":"5985",
            "winrm_timeout":"120m",
            "floppy_files":[
                "./answer_files/Autounattend.xml",
                "./scripts/shared/windows-updates.ps1"
            ],
            "vmx_data":{
                "RemoteDisplay.vnc.enabled":"false",
                "RemoteDisplay.vnc.port":"5900",
                "memsize":"4096",
                "numvcpus":"2",
                "scsi0.virtualDev":"lsisas1068"
            }
        },
        {
            "name":"vmware-webserver",
            "type":"vmware-vmx",
            "source_path":"./output-vmware-basewindows/packer-vmware-basewindows.vmx",
            "headless":false,
            "boot_wait":"2m",
            "shutdown_command":"shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "vnc_port_min":5900,
            "vnc_port_max":5980,
            "communicator":"winrm",
            "winrm_username":"vagrant",
            "winrm_password":"vagrant",
            "winrm_port":"5985",
            "winrm_timeout":"120m",
            "floppy_files":[
                "./scripts/shared/sysprep-tools.ps1",
                "./answer_files/Autounattend-sysprep.xml"
            ],
            "vmx_data":{
                "RemoteDisplay.vnc.enabled":"false",
                "RemoteDisplay.vnc.port":"5900",
                "memsize":"4096",
                "numvcpus":"2",
                "scsi0.virtualDev":"lsisas1068"
            }
        },
        {
            "name":"virtualbox-basewindows",
            "type":"virtualbox-iso",
            "iso_url":"./iso/en_windows_server_2012_r2_with_update_x64_dvd_6052708.iso",
            "iso_checksum_type":"md5",
            "iso_checksum":"78bff6565f178ed08ab534397fe44845",
            "headless":false,
            "boot_wait":"2m",
            "shutdown_command":"shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "guest_os_type":"Windows2012_64",
            "disk_size":61440,
            "communicator":"winrm",
            "winrm_username":"vagrant",
            "winrm_password":"vagrant",
            "winrm_port":"5985",
            "winrm_timeout":"120m",
            "floppy_files":[
                "./answer_files/Autounattend.xml",
                "./scripts/shared/windows-updates.ps1"
            ],
            "vboxmanage":[
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--memory",
                    "5048"
                ],
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--cpus",
                    "2"
                ]
            ]
        },
        {
            "name":"dev-desktop",
            "type":"virtualbox-ovf",
            "source_path":"./output-virtualbox-basewindows/packer-virtualbox-basewindows-1457297547.ovf",
            "headless":false,
            "boot_wait":"2m",
            "shutdown_command":"C:/windows/system32/sysprep/sysprep.exe /generalize /oobe /quiet /shutdown",
            "communicator":"winrm",
            "winrm_username":"vagrant",
            "winrm_password":"vagrant",
            "winrm_port":"5985",
            "winrm_timeout":"120m",
            "vboxmanage":[
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--memory",
                    "5048"
                ],
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--cpus",
                    "2"
                ]
            ]
        }
    ],
    "provisioners":[
        {
            "type":"powershell",
            "only": ["vmware-webserver"],
            "scripts":[
                "./scripts/shared/install-vmwaretools.ps1",
                "./scripts/shared/install-chocolatey.ps1",
                "./scripts/shared/install-winfeatures.ps1",
                "./scripts/shared/setup-sysprep-runonce.ps1"
            ]
        },
        {
            "type":"powershell",
            "only": ["dev-desktop"],
            "scripts":[
                "./scripts/shared/install-chocolatey.ps1",
                "./scripts/shared/install-winfeatures.ps1",
                "./scripts/install-dev-software.ps1"
            ]
        }
    ]
}